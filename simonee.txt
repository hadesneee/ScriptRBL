local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local Workspace = game:GetService("Workspace")
local LocalPlayer = Players.LocalPlayer

local Folder = Instance.new("Folder", Workspace)
local MainPart = Instance.new("Part", Folder)
MainPart.Anchored = true
MainPart.CanCollide = false
MainPart.Transparency = 1

if not getgenv().Network then
	getgenv().Network = { BaseParts = {}, Velocity = Vector3.new(14,14,14) }
	Network.RetainPart = function(part)
		if part:IsA("BasePart") and part:IsDescendantOf(Workspace) then
			table.insert(Network.BaseParts, part)
			part.CustomPhysicalProperties = PhysicalProperties.new(0,0,0,0,0)
			part.CanCollide = false
		end
	end
	LocalPlayer.ReplicationFocus = Workspace
	RunService.Heartbeat:Connect(function()
		sethiddenproperty(LocalPlayer,"SimulationRadius",math.huge)
		for _, part in pairs(Network.BaseParts) do
			if part:IsDescendantOf(Workspace) then
				part.Velocity = Network.Velocity
			end
		end
	end)
end

local radius = 10

local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "SuperRingPartsGUI"
ScreenGui.ResetOnSpawn = false
ScreenGui.Parent = LocalPlayer:WaitForChild("PlayerGui")

local iconButton = Instance.new("TextButton")
iconButton.Name = "DTIcon"
iconButton.Size = UDim2.new(0,60,0,60)
iconButton.Position = UDim2.new(0,20,0.8,0)
iconButton.Text = "ĐT"
iconButton.Font = Enum.Font.GothamBold
iconButton.TextSize = 24
iconButton.BackgroundColor3 = Color3.fromRGB(255,255,255)
iconButton.TextColor3 = Color3.fromRGB(0,0,0)
iconButton.Draggable = true
iconButton.Active = true
iconButton.Parent = ScreenGui

local Frame = Instance.new("Frame")
Frame.Size = UDim2.new(0,400,0,200)
Frame.Position = UDim2.new(0.5,-200,0.5,-100)
Frame.BackgroundColor3 = Color3.fromRGB(255,255,255)
Frame.BorderSizePixel = 0
Frame.Visible = false
Frame.Parent = ScreenGui
Frame.Draggable = true
Frame.Active = true
Instance.new("UICorner", Frame).CornerRadius = UDim.new(0,25)

local header = Instance.new("TextLabel", Frame)
header.Size = UDim2.new(1,0,0,40)
header.BackgroundTransparency = 1
header.Text = "SimoHayha"
header.Font = Enum.Font.GothamBold
header.TextColor3 = Color3.fromRGB(0,0,0)
header.TextSize = 22

local credit = Instance.new("TextLabel", Frame)
credit.Size = UDim2.new(1,-10,0,20)
credit.Position = UDim2.new(0,5,1,-25)
credit.BackgroundTransparency = 1
credit.Text = "Made by Simo"
credit.Font = Enum.Font.Fondamento
credit.TextColor3 = Color3.fromRGB(0,0,0)
credit.TextSize = 16

local radiusLabel = Instance.new("TextLabel", Frame)
radiusLabel.Size = UDim2.new(0.2,0,0,30)
radiusLabel.Position = UDim2.new(0.4,0,0.6,0)
radiusLabel.BackgroundTransparency = 1
radiusLabel.Text = "Bán kính: "..radius
radiusLabel.TextColor3 = Color3.fromRGB(0,0,0)
radiusLabel.Font = Enum.Font.Fondamento
radiusLabel.TextSize = 18

local buttonWidth = 90
local spacing = 15
local startX = 20
local startY = 70

local btnRing = Instance.new("TextButton", Frame)
btnRing.Size = UDim2.new(0,buttonWidth,0,35)
btnRing.Position = UDim2.new(0,startX,0,startY)
btnRing.Text = "Vòng"
btnRing.Font = Enum.Font.Fondamento
btnRing.TextSize = 16

local btnLaunch = Instance.new("TextButton", Frame)
btnLaunch.Size = UDim2.new(0,buttonWidth,0,35)
btnLaunch.Position = UDim2.new(0,startX+(buttonWidth+spacing)*1,0,startY)
btnLaunch.Text = "Phóng"
btnLaunch.Font = Enum.Font.Fondamento
btnLaunch.TextSize = 16

local btnStop = Instance.new("TextButton", Frame)
btnStop.Size = UDim2.new(0,buttonWidth,0,35)
btnStop.Position = UDim2.new(0,startX+(buttonWidth+spacing)*2,0,startY)
btnStop.Text = "Dừng"
btnStop.Font = Enum.Font.Fondamento
btnStop.TextSize = 16

local btnDec = Instance.new("TextButton", Frame)
btnDec.Size = UDim2.new(0,buttonWidth,0,35)
btnDec.Position = UDim2.new(0,startX+(buttonWidth+spacing)*0,0,startY+50)
btnDec.Text = "<"
btnDec.Font = Enum.Font.Fondamento
btnDec.TextSize = 16

local btnInc = Instance.new("TextButton", Frame)
btnInc.Size = UDim2.new(0,buttonWidth,0,35)
btnInc.Position = UDim2.new(0,startX+(buttonWidth+spacing)*1,0,startY+50)
btnInc.Text = ">"
btnInc.Font = Enum.Font.Fondamento
btnInc.TextSize = 16

iconButton.MouseButton1Click:Connect(function()
	Frame.Visible = not Frame.Visible
end)

local ringActive = false
local launchActive = false
local partsList = {}
local angles = {}

local function validPart(p)
	if p:IsA("BasePart") and not p.Anchored and p:IsDescendantOf(Workspace) then
		if p:IsDescendantOf(LocalPlayer.Character) then return false end
		p.CanCollide = false
		p.CustomPhysicalProperties = PhysicalProperties.new(0,0,0,0,0)
		return true
	end
	return false
end

for _,p in pairs(Workspace:GetDescendants()) do
	if validPart(p) then table.insert(partsList,p) end
end

Workspace.DescendantAdded:Connect(function(p)
	if validPart(p) then table.insert(partsList,p) end
end)

Workspace.DescendantRemoving:Connect(function(p)
	for i, v in pairs(partsList) do
		if v==p then table.remove(partsList,i) end
	end
end)

btnRing.MouseButton1Click:Connect(function()
	ringActive = not ringActive
	btnRing.Text = (ringActive and "Vòng Bật") or "Vòng Tắt"
end)

btnDec.MouseButton1Click:Connect(function()
	radius = math.max(1,radius-5)
	radiusLabel.Text = "Bán kính: "..radius
end)

btnInc.MouseButton1Click:Connect(function()
	radius = math.min(1000,radius+5)
	radiusLabel.Text = "Bán kính: "..radius
end)

btnLaunch.MouseButton1Click:Connect(function()
	launchActive = true
end)

btnStop.MouseButton1Click:Connect(function()
	launchActive = false
end)

RunService.Heartbeat:Connect(function()
	local hrp = LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart")
	if not hrp then return end
	local nearestPlayer
	if launchActive then
		local minDist = math.huge
		for _, p in pairs(Players:GetPlayers()) do
			if p ~= LocalPlayer and p.Character and p.Character:FindFirstChild("Humanoid") 
				and p.Character.Humanoid.Health>0 and p.Character:FindFirstChild("HumanoidRootPart") then
				local dist = (p.Character.HumanoidRootPart.Position-hrp.Position).Magnitude
				if dist < minDist then
					minDist = dist
					nearestPlayer = p
				end
			end
		end
	end
	for _, part in pairs(partsList) do
		if part.Parent and not part.Anchored then
			if launchActive and nearestPlayer then
				local targetPos = nearestPlayer.Character.HumanoidRootPart.Position
				part.Velocity = (targetPos-part.Position).Unit*1000
			elseif ringActive then
				if not angles[part] then
					angles[part] = math.atan2(part.Position.Z-hrp.Position.Z, part.Position.X-hrp.Position.X)
				end
				angles[part] = angles[part]+0.05
				local targetPos = Vector3.new(
					hrp.Position.X + math.cos(angles[part])*radius,
					hrp.Position.Y,
					hrp.Position.Z + math.sin(angles[part])*radius
				)
				part.Velocity = (targetPos-part.Position)*50
			end
		end
	end
end)

pcall(function()
	loadstring(game:HttpGet("https://raw.githubusercontent.com/XNEOFF/FlyGuiV3/main/FlyGuiV3.txt"))()
end)

